{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Camsito/Desktop/RegistrApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"../../services/shared.service\";\nimport * as i4 from \"@awesome-cordova-plugins/sqlite/ngx\";\nimport * as i5 from \"@angular/forms\";\nlet HomePage = /*#__PURE__*/(() => {\n  var _class;\n  class HomePage {\n    segmentChanged() {\n      // Puedes realizar acciones adicionales aquí según el segmento seleccionado.\n      console.log('Segment changed to:', this.segmentValue);\n      // Redirige al usuario según la selección del toggle\n      if (this.segmentValue === 'nivel 1') {\n        this.router.navigate(['/menuProfesor']);\n      } else {\n        this.router.navigate(['/menuAlumno']);\n      }\n    }\n    constructor(router, toastController, sharedService, sqlite) {\n      this.router = router;\n      this.toastController = toastController;\n      this.sharedService = sharedService;\n      this.sqlite = sqlite;\n      this.segmentValue = 'nivel 1';\n    }\n    mostrarMensaje(mensaje) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const toast = yield _this.toastController.create({\n          message: mensaje,\n          duration: 2000,\n          position: 'top'\n        });\n        toast.present();\n      })();\n    }\n    validarYLogin() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const usuario = document.querySelector('input[name=\"User\"]').value;\n        const contrasena = document.querySelector('input[name=\"Pass\"]').value;\n        if (!usuario || !contrasena) {\n          _this2.mostrarMensaje('Los campos no pueden estar vacíos.');\n          return;\n        }\n        _this2.sqlite.create({\n          name: 'usuarios.db',\n          location: 'default'\n        }).then(db => {\n          db.executeSql('SELECT * FROM credenciales WHERE usuario = ? AND contrasena = ?', [usuario, contrasena]).then(data => {\n            if (data.rows.length > 0) {\n              // Las credenciales son válidas, redirige a la página /menu\n              _this2.sharedService.setUsername(usuario);\n              _this2.router.navigate(['/menu']);\n            } else {\n              // Las credenciales son incorrectas, muestra un mensaje de error\n              _this2.mostrarMensaje('Usuario o contraseña incorrectos.');\n            }\n          }).catch(error => {\n            console.error('Error al ejecutar consulta en SQLite', error);\n            _this2.mostrarMensaje('Error al verificar las credenciales.');\n          });\n        }).catch(error => {\n          console.error('Error al abrir la base de datos SQLite', error);\n          _this2.mostrarMensaje('Error al abrir la base de datos.');\n        });\n      })();\n    }\n    navigateToMenu() {\n      this.router.navigate(['/menu']); // Navigate to the \"Menu\" page\n    }\n\n    navigateToForgot() {\n      this.router.navigate(['/forgot-password']); // Navigate to the \"Forgot\" page\n    }\n  }\n  _class = HomePage;\n  _class.ɵfac = function HomePage_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ToastController), i0.ɵɵdirectiveInject(i3.SharedService), i0.ɵɵdirectiveInject(i4.SQLite));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-home\"]],\n    decls: 25,\n    vars: 3,\n    consts: [[\"id\", \"Header\", 3, \"translucent\"], [3, \"fullscreen\"], [1, \"circle\"], [3, \"ngModel\", \"ngModelChange\", \"ionChange\"], [\"value\", \"nivel 1\"], [\"value\", \"nivel 2\"], [\"id\", \"container\", 1, \"cssanimation\", \"leFadeIn\", \"sequence\"], [\"src\", \"../../assets/Screenshot 2023-08-16 210220.png\"], [\"position\", \"floating\", \"type\", \"email\"], [\"name\", \"User\", \"type\", \"text\"], [\"position\", \"floating\"], [\"name\", \"Pass\", \"type\", \"password\"], [\"mat-raised-button\", \"\", 3, \"click\"], [3, \"click\"]],\n    template: function HomePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"LOGIN\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(4, \"ion-content\", 1);\n        i0.ɵɵelement(5, \"div\", 2);\n        i0.ɵɵelementStart(6, \"ion-segment\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function HomePage_Template_ion_segment_ngModelChange_6_listener($event) {\n          return ctx.segmentValue = $event;\n        })(\"ionChange\", function HomePage_Template_ion_segment_ionChange_6_listener() {\n          return ctx.segmentChanged();\n        });\n        i0.ɵɵelementStart(7, \"ion-segment-button\", 4);\n        i0.ɵɵtext(8, \" Profesor \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ion-segment-button\", 5);\n        i0.ɵɵtext(10, \" Alumno \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 6);\n        i0.ɵɵelement(12, \"ion-img\", 7);\n        i0.ɵɵelementStart(13, \"ion-item\")(14, \"ion-label\", 8);\n        i0.ɵɵtext(15, \"Nombre de Usuario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"ion-input\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"ion-item\")(18, \"ion-label\", 10);\n        i0.ɵɵtext(19, \"Contrase\\u00F1a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"ion-input\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"ion-button\", 12);\n        i0.ɵɵlistener(\"click\", function HomePage_Template_ion_button_click_21_listener() {\n          return ctx.validarYLogin();\n        });\n        i0.ɵɵtext(22, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"a\", 13);\n        i0.ɵɵlistener(\"click\", function HomePage_Template_a_click_23_listener() {\n          return ctx.navigateToForgot();\n        });\n        i0.ɵɵtext(24, \"Restablecer Contrase\\u00F1a\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"translucent\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.segmentValue);\n      }\n    },\n    dependencies: [i5.NgControlStatus, i5.NgModel, i2.IonButton, i2.IonContent, i2.IonHeader, i2.IonImg, i2.IonInput, i2.IonItem, i2.IonLabel, i2.IonSegment, i2.IonSegmentButton, i2.IonTitle, i2.IonToolbar, i2.SelectValueAccessor, i2.TextValueAccessor],\n    styles: [\"*[_ngcontent-%COMP%]{--background: aliceblue}#Header[_ngcontent-%COMP%]{text-align:center;box-shadow:none}ion-toolbar[_ngcontent-%COMP%]{--background: transparent;color:#000}.circle[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#3498db;position:absolute;top:-224px;left:-179px;transform:rotate(50deg)}#container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;background-color:transparent;animation:2.5s cubic-bezier(.25,1,.3,1) _ngcontent-%COMP%_circle-in-center both}label-floating[_ngcontent-%COMP%]{color:#fff}ion-input[_ngcontent-%COMP%]{width:100%;--background: transparent}ion-item[_ngcontent-%COMP%]{border-radius:50px;margin-bottom:1%;--background: #3498db}a[_ngcontent-%COMP%]{cursor:pointer}ion-img[_ngcontent-%COMP%]{width:auto;height:15%;padding-bottom:10px}ion-button[_ngcontent-%COMP%]{--background: #0069aa}.selected-toggle[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{--ion-color-checked: black;--ion-color-unchecked: blue}@keyframes _ngcontent-%COMP%_circle-in-center{0%{clip-path:circle(0%)}to{clip-path:circle(125%)}}\"]\n  });\n  return HomePage;\n})();\nexport { HomePage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}