{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Camsito/Desktop/RegistrApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/shared.service\";\nimport * as i3 from \"../../services/loginGuard/service-guard.service\";\nimport * as i4 from \"src/services/mensajeService/mensaje.service\";\nimport * as i5 from \"../../services/SQLiteService/sqlite.service\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@ionic/angular\";\nlet HomePage = /*#__PURE__*/(() => {\n  var _class;\n  class HomePage {\n    constructor(router, sharedService, serviceGuard, mensajeService, sqliteService) {\n      this.router = router;\n      this.sharedService = sharedService;\n      this.serviceGuard = serviceGuard;\n      this.mensajeService = mensajeService;\n      this.sqliteService = sqliteService;\n      this.segmentValue = 'profesor';\n    }\n    validarYLogin() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const usuario = document.querySelector('input[name=\"User\"]').value;\n        const contrasena = document.querySelector('input[name=\"Pass\"]').value;\n        if (!usuario || !contrasena) {\n          _this.mensajeService.mostrarMensaje('Los campos no pueden estar vacíos.');\n          return;\n        }\n        _this.sqliteService.verificarCredenciales(usuario, contrasena).then(valido => {\n          if (valido) {\n            // Las credenciales son válidas, redirige a la página /menu\n            _this.sharedService.setUsername(usuario);\n            if (_this.segmentValue === 'profesor') {\n              _this.router.navigate(['/menu-profesor']);\n            } else {\n              _this.router.navigate(['/menu']);\n            }\n            // Marcar que el usuario ha pasado por el login\n            _this.serviceGuard.setPassedLogin(true);\n          } else {\n            // Las credenciales son incorrectas, muestra un mensaje de error\n            _this.mensajeService.mostrarMensaje('Usuario o contraseña incorrectos.');\n          }\n        });\n      })();\n    }\n    navigateToMenu() {\n      this.router.navigate(['/menu']);\n    }\n    navigateToForgot() {\n      this.router.navigate(['/forgot-password']);\n    }\n  }\n  _class = HomePage;\n  _class.ɵfac = function HomePage_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.SharedService), i0.ɵɵdirectiveInject(i3.ServiceGuardService), i0.ɵɵdirectiveInject(i4.MensajeService), i0.ɵɵdirectiveInject(i5.SQLiteService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-home\"]],\n    decls: 26,\n    vars: 3,\n    consts: [[\"id\", \"Header\", 3, \"translucent\"], [\"id\", \"body\", 3, \"fullscreen\"], [1, \"circle\"], [\"id\", \"container\", 1, \"cssanimation\", \"leFadeIn\", \"sequence\"], [\"src\", \"../../assets/Screenshot 2023-08-16 210220.png\"], [\"position\", \"floating\", \"type\", \"email\", \"color\", \"white\"], [\"name\", \"User\", \"type\", \"text\"], [\"position\", \"floating\", \"color\", \"white\"], [\"name\", \"Pass\", \"type\", \"password\"], [\"mat-raised-button\", \"\", 3, \"click\"], [3, \"click\"], [\"id\", \"contain\"], [\"id\", \"container-segment\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"profesor\", 1, \"segment-button\"], [\"value\", \"alumno\", 1, \"segment-button\"]],\n    template: function HomePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Bienvenidos\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(4, \"ion-content\", 1);\n        i0.ɵɵelement(5, \"div\", 2);\n        i0.ɵɵelementStart(6, \"div\", 3);\n        i0.ɵɵelement(7, \"ion-img\", 4);\n        i0.ɵɵelementStart(8, \"ion-item\")(9, \"ion-label\", 5);\n        i0.ɵɵtext(10, \"Nombre de Usuario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"ion-input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"ion-item\")(13, \"ion-label\", 7);\n        i0.ɵɵtext(14, \"Contrase\\u00F1a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"ion-input\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-button\", 9);\n        i0.ɵɵlistener(\"click\", function HomePage_Template_ion_button_click_16_listener() {\n          return ctx.validarYLogin();\n        });\n        i0.ɵɵtext(17, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function HomePage_Template_a_click_18_listener() {\n          return ctx.navigateToForgot();\n        });\n        i0.ɵɵtext(19, \"Restablecer Contrase\\u00F1a\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 11)(21, \"ion-segment\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function HomePage_Template_ion_segment_ngModelChange_21_listener($event) {\n          return ctx.segmentValue = $event;\n        });\n        i0.ɵɵelementStart(22, \"ion-segment-button\", 13);\n        i0.ɵɵtext(23, \" Profesor \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"ion-segment-button\", 14);\n        i0.ɵɵtext(25, \" Alumno \");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"translucent\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"ngModel\", ctx.segmentValue);\n      }\n    },\n    dependencies: [i6.NgControlStatus, i6.NgModel, i7.IonButton, i7.IonContent, i7.IonHeader, i7.IonImg, i7.IonInput, i7.IonItem, i7.IonLabel, i7.IonSegment, i7.IonSegmentButton, i7.IonTitle, i7.IonToolbar, i7.SelectValueAccessor, i7.TextValueAccessor],\n    styles: [\"ion-toolbar[_ngcontent-%COMP%]{--background: transparent;color:#fff}ion-input[_ngcontent-%COMP%]{width:100%;--background: transparent;--highlight-color-focused:#transparent}ion-item[_ngcontent-%COMP%]{border-radius:50px;margin-bottom:1%;--background: #3498db}a[_ngcontent-%COMP%]{cursor:pointer}ion-img[_ngcontent-%COMP%]{width:auto;height:15%;padding-bottom:10px}ion-button[_ngcontent-%COMP%]{--background: #0069aa}ion-button[_ngcontent-%COMP%]:hover{--background:#fff;color:#0069aa}ion-segment[_ngcontent-%COMP%]{border-radius:50px;position:absolute;width:auto}#body[_ngcontent-%COMP%]{--ion-background-color:#fff}#Header[_ngcontent-%COMP%]{text-align:center;box-shadow:none}#container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:70%;background-color:transparent;animation:2.5s cubic-bezier(.25,1,.3,1) _ngcontent-%COMP%_circle-in-center both;--background-activated:#fff}#contain[_ngcontent-%COMP%]{display:flex;justify-content:center}#container-segment[_ngcontent-%COMP%]{width:70%;height:auto}.segment-button[_ngcontent-%COMP%]{color:#fff;width:auto;--background:#3498db;--background-checked:#353434;--color-hover:#353434;--color-checked:#3498db}.circle[_ngcontent-%COMP%]{width:103%;height:122%;background-color:#3498db;position:absolute;top:-50%;left:-23%;transform:rotate(50deg)}@keyframes _ngcontent-%COMP%_circle-in-center{0%{clip-path:circle(0%)}to{clip-path:circle(125%)}}\"]\n  });\n  return HomePage;\n})();\nexport { HomePage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}