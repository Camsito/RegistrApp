{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@awesome-cordova-plugins/sqlite/ngx\";\nimport * as i2 from \"../mensajeService/mensaje.service\";\nlet SQLiteService = /*#__PURE__*/(() => {\n  var _class;\n  class SQLiteService {\n    constructor(sqlite, mensajeService) {\n      this.sqlite = sqlite;\n      this.mensajeService = mensajeService;\n    }\n    verificarCredenciales(usuario, contrasena) {\n      return this.createDatabase().then(db => {\n        return db.executeSql('SELECT * FROM credenciales WHERE usuario = ? AND contrasena = ?', [usuario, contrasena]).then(data => {\n          return data.rows.length > 0; // Devuelve true si las credenciales son válidas\n        }).catch(error => {\n          console.error('Error al ejecutar consulta en SQLite', error);\n          this.mensajeService.mostrarMensaje('No se han encontrado coincidencias');\n          return false; // Devuelve false en caso de error\n        });\n      }).catch(error => {\n        console.error('Error al abrir la base de datos SQLite', error);\n        this.mensajeService.mostrarMensaje('Ha ocurrido un error interno de la base de datos');\n        return false; // Devuelve false en caso de error\n      });\n    }\n\n    createDatabase() {\n      return this.sqlite.create({\n        name: 'usuarios.db',\n        location: 'default'\n      });\n    }\n    createTable() {\n      return this.createDatabase().then(db => {\n        return db.executeSql(`\n        CREATE TABLE IF NOT EXISTS credenciales (\n          id INTEGER PRIMARY KEY AUTOINCREMENT,\n          usuario TEXT,\n          contrasena TEXT\n        )`, []).then(() => {\n          console.log('Tabla de credenciales creada');\n          this.mensajeService.mostrarMensaje('Tabla creada');\n        })\n        // .catch(error => console.error('Error al crear la tabla de credenciales', error));\n        .catch(error => this.mensajeService.mostrarMensaje('Tabla NO creada'));\n      });\n    }\n    agregarCredencial(usuario, contrasena) {\n      return this.createDatabase().then(db => {\n        return db.executeSql('INSERT INTO credenciales (usuario, contrasena) VALUES (?, ?)', [usuario, contrasena]).then(() => {\n          console.log('Credencial agregada con éxito.');\n          this.mensajeService.mostrarMensaje('Credenciales creadas');\n        })\n        // .catch(error => console.error('Error al agregar la credencial', error));\n        .catch(error => this.mensajeService.mostrarMensaje('Error al crear las credenciales'));\n      });\n    }\n  }\n  _class = SQLiteService;\n  _class.ɵfac = function SQLiteService_Factory(t) {\n    return new (t || _class)(i0.ɵɵinject(i1.SQLite), i0.ɵɵinject(i2.MensajeService));\n  };\n  _class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: _class,\n    factory: _class.ɵfac,\n    providedIn: 'root'\n  });\n  return SQLiteService;\n})();\nexport { SQLiteService };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}